# People Detector üï∫üë´

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ Python –¥–ª—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –∏ —Ç—Ä–µ–∫–∏–Ω–≥–∞ –ª—é–¥–µ–π –≤ –≤–∏–¥–µ–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º YOLOv8. –°–æ–∑–¥–∞–µ—Ç –≤–∏–¥–µ–æ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –¥–µ—Ç–µ–∫—Ü–∏–π, —Ç—Ä–µ–∫–∏–Ω–≥–æ–º –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π.

![–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã](demo.gif) <!-- –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä -->

## üîç –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üéØ –î–µ—Ç–µ–∫—Ü–∏—è –ª—é–¥–µ–π —Å YOLOv8 (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π –º–æ–¥–µ–ª–µ–π)
- üÜî –¢—Ä–µ–∫–∏–Ω–≥ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ ID (SORT –∞–ª–≥–æ—Ä–∏—Ç–º)
- üìä –ü–æ–¥—Å—á–µ—Ç –ª—é–¥–µ–π –≤ –∫–∞–¥—Ä–µ + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- üñºÔ∏è –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:
  - –ó–µ–ª–µ–Ω—ã–µ bounding boxes
  - –ú–µ—Ç–∫–∏ —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é
  - –°—á–µ—Ç—á–∏–∫ –ª—é–¥–µ–π
- ‚ö° –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GPU (CUDA) –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
- üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
- üìà –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/yourusername/people_detector.git
cd people_detector


2. –°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

bash
python -m venv .venv
source .venv/bin/activate  # Linux/MacOS
.venv\Scripts\activate     # Windows
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

bash
pip install -r requirements.txt
(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–ª—è GPU —É—Å–∫–æ—Ä–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ CUDA:

bash
conda install pytorch torchvision torchaudio cudatoolkit=11.3 -c pytorch
üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
–ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫:

bash
python detector.py --input crowd.mp4 --output output.mp4
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–∞:

–ê—Ä–≥—É–º–µ–Ω—Ç	–û–ø–∏—Å–∞–Ω–∏–µ	–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
--input	–ü—É—Ç—å –∫ –≤—Ö–æ–¥–Ω–æ–º—É –≤–∏–¥–µ–æ	crowd.mp4
--output	–ü—É—Ç—å –¥–ª—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –≤–∏–¥–µ–æ	output.mp4
--model	–ú–æ–¥–µ–ª—å YOLOv8 (n, s, m, l, x)	yolov8m.pt
--conf	–ü–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏	0.5
--iou	–ü–æ—Ä–æ–≥ IoU –¥–ª—è NMS	0.5
–ü—Ä–∏–º–µ—Ä —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

bash
python detector.py --input crowd.mp4 --output result.mp4 --model yolov8l.pt --conf 0.6
üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å–æ–∑–¥–∞–µ—Ç:

–í—ã—Ö–æ–¥–Ω–æ–µ –≤–∏–¥–µ–æ (output.mp4) —Å:

–î–µ—Ç–µ–∫—Ü–∏—è–º–∏ –ª—é–¥–µ–π

–¢—Ä–µ–∫–∏–Ω–≥–æ–º (ID)

–°—á–µ—Ç—á–∏–∫–æ–º –ª—é–¥–µ–π

–õ–æ–≥-—Ñ–∞–π–ª (detector.log) —Å:

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

–°—Ä–µ–¥–Ω–∏–º/–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º –ª—é–¥–µ–π

–ê–Ω–∞–ª–∏–∑–æ–º –∫–∞—á–µ—Å—Ç–≤–∞

üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–ê–ø–ø–∞—Ä–∞—Ç—É—Ä–∞	–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ	FPS
CPU (i7)	1280x720	4-6
GPU (RTX 3060)	1920x1080	25-30
üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

bash
python -m unittest tests/test_detector.py
–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:

–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏

–û–±—Ä–∞–±–æ—Ç–∫—É –∫–∞–¥—Ä–æ–≤

–ü–æ–¥—Å—á–µ—Ç –ª—é–¥–µ–π

–û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

üèÜ –¢–æ—á–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏
–ú–æ–¥–µ–ª—å	mAP@0.5	–†–∞–∑–º–µ—Ä	FPS (GPU)
yolov8n	0.58	6.2MB	50+
yolov8s	0.62	21MB	45
yolov8m	0.65	49MB	30
yolov8l	0.67	83MB	20
yolov8x	0.68	130MB	15
üöÄ –ö–∞–∫ —É–ª—É—á—à–∏—Ç—å?
–ü–æ–≤—ã—à–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏
python
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ —Ç—è–∂–µ–ª—É—é –º–æ–¥–µ–ª—å
python detector.py --model yolov8l.pt

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
python detector.py --conf 0.6 --iou 0.4
–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
python
# –î–ª—è CPU —É–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
frame = cv2.resize(frame, (1280, 720))

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ONNX —ç–∫—Å–ø–æ—Ä—Ç
model.export(format='onnx')
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏—á–∏
python
# Heatmap —Å–∫–æ–ø–ª–µ–Ω–∏–π –ª—é–¥–µ–π
heatmap = generate_heatmap(detections)
frame = overlay_heatmap(frame, heatmap)

# –ê–Ω–∞–ª–∏–∑ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–π
analyze_movement(tracks)
üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
text
people_detector/
‚îú‚îÄ‚îÄ detector.py          # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .gitignore          # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ tests/              # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ test_detector.py
‚îî‚îÄ‚îÄ utils/              # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
    ‚îú‚îÄ‚îÄ tracker.py
    ‚îî‚îÄ‚îÄ visualizer.py
üìú –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License ¬© 2023 [–í–∞—à–µ –ò–º—è]

text

–ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. –î–æ–±–∞–≤–ª–µ–Ω—ã emoji –¥–ª—è –ª—É—á—à–µ–π –≤–∏–∑—É–∞–ª—å–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
2. –ß–µ—Ç–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
3. –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
4. –°–µ–∫—Ü–∏—è "–ö–∞–∫ —É–ª—É—á—à–∏—Ç—å" —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏
5. –í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
6. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
7. –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

–í—ã –º–æ–∂–µ—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç—å:
- –†–µ–∞–ª—å–Ω—ã–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã —Ä–∞–±–æ—Ç—ã
- GIF –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é
- –°—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–∏–º–µ—Ä—ã –≤—ã—Ö–æ–¥–Ω—ã—Ö –≤–∏–¥–µ–æ
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –û–°
- –ü—Ä–∏–º–µ—Ä—ã –∞–Ω–∞–ª–∏–∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
